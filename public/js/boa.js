"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Boa=function(){function e(){_classCallCheck(this,e),this.elements=[],this.regexes={attrRegex:new RegExp(/([\w\-]+)/.source+/(?:= ?)/.source+/([\w\-\/\.\;\: ]+)/.source+/(?= [\w\-]+=|$)/.source,"g")},this.treeLevel=0,this.levelChange=!1,this.logConstruction=!1,this.reports=[]}return _createClass(e,[{key:"down",get:function(){return this.treeLevel++,this.nextChild=!0,this.levelChange=!0,this}},{key:"up",get:function(){return this.treeLevel=this.treeLevel-1,this.levelChange=!0,this}},{key:"para",get:function(){return this.levelChange=!1,this}},{key:"showConstruction",get:function(){return this.logConstruction=!0,this}}]),e}();Boa.prototype.construct=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if(this.validate([e,"string"],[t,"string"],[r,"string"])){var n=this.createHTMLTag(e),i=this.identifyAttr(t),s=this.createContent(r);Object.keys(i).forEach(function(e){n.setAttribute(e,i[e])}),n.append(s);var o=this.createElementObject(e,i,r,n);if(this.report("--------------------NEW ELEMENT------------------------"),this.report("Element created:",o),this.report("Element depth level:",this.treeLevel),0<this.treeLevel&&this.nextChild){var l=this.elements[this.elements.length-1];this.report("Nesting as child:",o.tag),this.report("Elements branch starting element:",l);for(var h=0;h<this.treeLevel;h++)l=l.children[l.children.length-1]||l.children,this.report("Progressing down tree: (Level: "+h+") - target at level:",l),h===this.treeLevel-2?(this.report("Parent of element:",l),this.lastElementParent=l):h===this.treeLevel-1&&(this.report("Adding elements to parent:",{element:o,parent:l}),this.applyElements(l,o),this.nextChild=!1)}else if(0<this.treeLevel&&!this.nextChild&&this.levelChange){var a=this.elements[this.elements.length-1];this.report("Nesting as sibling of parent:",o.tag),this.report("Elements branch starting element:",a);for(h=0;h<this.treeLevel;h++)a=a.children,this.report("Progressing down tree: (Level: "+h+") - target at level:",a),h===this.treeLevel-2?(this.report("Parent of element:",a),this.lastElementParent=a):h===this.treeLevel-1&&(this.report("Adding elements to parent:",{element:o,parent:a}),this.applyElements(a,o),this.nextChild=!1)}else!this.levelChange&&!this.nextChild&&0<this.treeLevel?(this.report("Nesting as sibling of element:",o.tag),this.applyElements(this.lastElementParent.children,o)):(this.report("Creating new branch",o.tag),this.report("TreeLevel should be 0. TreeLevel => ",this.treeLevel),this.elements.push(o));return this}},Boa.prototype.applyElements=function(e,t){return e.push(t),this},Boa.prototype.createElementObject=function(e,t,r,n){return{tag:e,attributes:t,content:r,html:n,children:[]}},Boa.prototype.createContent=function(e){return document.createTextNode(e)},Boa.prototype.validate=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(function(e){return _typeof(e[0])!=e[1]});if(0===n.length)return!0;this.report("Error: Arguments given to construct must be strings \n\n"+n[0][0]+" is not a "+n[0][1])},Boa.prototype.report=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return this.logConstruction?(""!==t?this.reports.push([e,t]):this.reports.push([e]),console.log(e,t)):void 0},Boa.prototype.createHTMLTag=function(e){return document.createElement(e)},Boa.prototype.identifyAttr=function(e){var t={},r=this.regexes.attrRegex;if(r.test(e))for(var n=void(r.lastIndex=0);null!==(n=r.exec(e));)t[n[1]]=n[2];else t=!1;return t};